/*! Lazy Load XT v1.0.6 2014-11-19
 * http://ressio.github.io/lazy-load-xt
 * (C) 2014 RESS.io
 * Licensed under MIT */
!function(e,t,n,o){function a(e,t){return e[t]===o?y[t]:e[t]}function r(){var e=t.pageYOffset;return e===o?m.scrollTop:e}function i(e,t){var n=y["on"+e];n&&(E(n)?n.call(t[0]):(n.addClass&&t.addClass(n.addClass),n.removeClass&&t.removeClass(n.removeClass))),t.trigger("lazy"+e,[t]),d()}function l(t){i(t.type,e(this).off(h,l))}function s(n){if(T.length){n=n||y.forceLoad,B=1/0;var o,a,s=r(),c=t.innerHeight||m.clientHeight,d=t.innerWidth||m.clientWidth;for(o=0,a=T.length;a>o;o++){var f,u=T[o],g=u[0],v=u[A],p=!1,C=n;if(I(m,g)){if(n||!v.visibleOnly||g.offsetWidth||g.offsetHeight){if(!C){var w=g.getBoundingClientRect(),z=v.edgeX,b=v.edgeY;f=w.top+s-b-c,C=s>=f&&w.bottom>-b&&w.left<=d+z&&w.right>-z}if(C){i("show",u);var L=v.srcAttr,X=E(L)?L(u):g.getAttribute(L);X&&(u.on(h,l),g.src=X),p=!0}else B>f&&(B=f)}}else p=!0;p&&(T.splice(o--,1),a--)}a||i("complete",e(m))}}function c(){L>1?(L=1,s(),setTimeout(c,y.throttle)):L=0}function d(e){T.length&&(e&&"scroll"===e.type&&e.currentTarget===t&&B>=r()||(L||setTimeout(c,0),L=2))}function f(){w.lazyLoadXT()}function u(){s(!0)}var A="lazyLoadXT",g="lazied",h="load error",v="lazy-hidden",m=n.documentElement||n.body,p=t.onscroll===o||!!t.operamini||!m.getBoundingClientRect,y={autoInit:!0,selector:"img[data-src]",blankImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",throttle:99,forceLoad:p,loadEvent:"pageshow",updateEvent:"load orientationchange resize scroll touchmove focus",forceEvent:"",oninit:{removeClass:"lazy"},onshow:{addClass:v},onload:{removeClass:v,addClass:"lazy-loaded"},onerror:{removeClass:v},checkDuplicates:!0},C={srcAttr:"data-src",edgeX:0,edgeY:0,visibleOnly:!0},w=e(t),E=e.isFunction,z=e.extend,b=e.data||function(t,n){return e(t).data(n)},I=e.contains||function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},T=[],B=0,L=0;e[A]=z(y,C,e[A]),e.fn[A]=function(n){n=n||{};var o,r=a(n,"blankImage"),l=a(n,"checkDuplicates"),s=a(n,"scrollContainer"),c={};e(s).on("scroll",d);for(o in C)c[o]=a(n,o);return this.each(function(o,a){if(a===t)e(y.selector).lazyLoadXT(n);else{if(l&&b(a,g))return;var s=e(a).data(g,1);r&&"IMG"===a.tagName&&!a.src&&(a.src=r),s[A]=z({},c),i("init",s),T.push(s)}})},e(n).ready(function(){i("start",w),w.on(y.loadEvent,f).on(y.updateEvent,d).on(y.forceEvent,u),e(n).on(y.updateEvent,d),y.autoInit&&f()})}(window.jQuery||window.Zepto||window.$,window,document);